import{d as w,f as m,c as _,A as E,p as y,w as A,o as C,h as g,j as f,r as P,n as $}from"./vueComponentNormalizer.1897d859.js";const b="modulepreload",v={},x="/tmagic-editor/playground/runtime/vue2/",I=function(a,o){return!o||o.length===0?a():Promise.all(o.map(i=>{if(i=`${x}${i}`,i in v)return;v[i]=!0;const u=i.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${c}`))return;const e=document.createElement("link");if(e.rel=u?"stylesheet":b,u||(e.as="script",e.crossOrigin=""),e.href=i,document.head.appendChild(e),u)return new Promise((r,n)=>{e.addEventListener("load",r),e.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>a())};var S=w({setup(){const t=m(),a=m(),o=m(),i=_(()=>{var c,e,r,n;return((e=(c=t.value)==null?void 0:c.items)==null?void 0:e.find(s=>s.id===a.value))||((n=(r=t.value)==null?void 0:r.items)==null?void 0:n[0])}),u=new E({config:t.value,platform:"editor"});return y("app",u),A(i,async()=>{await g();const c=document.querySelector(".magic-ui-page");c&&window.magic.onPageElUpdate(c)}),C(()=>{var c;(c=window.magic)==null||c.onRuntimeReady({getApp(){return u},updateRootConfig(e){console.log("update config",e),t.value=e,u==null||u.setConfig(e,a.value)},updatePageId(e){console.log("update page id",e),a.value=e,u==null||u.setPage(e)},getSnapElements(){return Array.from(document.querySelectorAll("[class*=magic-ui][id]"))},select(e){console.log("select config",e),o.value=e;const r=document.getElementById(`${e}`);return r||g().then(()=>document.getElementById(`${e}`))},add({config:e}){var l;if(console.log("add config",e),!t.value)throw new Error("error");if(!o.value)throw new Error("error");const r=f(o.value,[t.value]),n=r.pop(),s=n!=null&&n.items?n:r.pop();if(!s)throw new Error("\u672A\u627E\u5230\u7236\u8282\u70B9");(l=s.items)==null||l.push(e)},update({config:e}){var p;if(console.log("update config",e),!t.value)throw new Error("error");const r=f(e.id,[t.value]),n=r.pop(),s=r.pop();if(!n)throw new Error("\u672A\u627E\u5230\u76EE\u6807\u8282\u70B9");if(!s)throw new Error("\u672A\u627E\u5230\u7236\u8282\u70B9");const l=(p=s.items)==null?void 0:p.findIndex(d=>d.id===n.id);s.items.splice(l,1,P(e))},remove({id:e}){var p;if(!t.value)throw new Error("error");const r=f(e,[t.value]),n=r.pop();if(!n)throw new Error("\u672A\u627E\u5230\u76EE\u6807\u5143\u7D20");const s=r.pop();if(!s)throw new Error("\u672A\u627E\u5230\u7236\u5143\u7D20");const l=(p=s.items)==null?void 0:p.findIndex(d=>d.id===n.id);s.items.splice(l,1)}})}),{pageConfig:i}}}),k=function(){var t=this,a=t.$createElement,o=t._self._c||a;return t.pageConfig?o("magic-ui-page",{attrs:{config:t.pageConfig}}):t._e()},R=[];const h={};var B=$(S,k,R,!1,j,null,null,null);function j(t){for(let a in h)this[a]=h[a]}var O=function(){return B.exports}();I(()=>import("./comp-entry.8552b96d.js"),["assets/comp-entry.8552b96d.js","assets/vueComponentNormalizer.1897d859.js"]).then(()=>{const{components:t,plugins:a}=window.magicPresetComponents;Object.values(t).forEach(o=>{Vue.component(o.name,o)}),Object.values(a).forEach(o=>{Vue.use(o)}),new Vue({render:o=>o(O),el:"#app"})});
//# sourceMappingURL=playground.js.map
